<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ููุญุฉ ุงูุชุญูู โ ุตูุฏุงุช ุงูุนูุฏ</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@300;400;500;600;700&family=Tajawal:wght@500;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/variables.css">
<link rel="stylesheet" href="css/reset.css">
<link rel="stylesheet" href="css/layout.css">
<link rel="stylesheet" href="css/buttons.css">
<link rel="stylesheet" href="css/forms.css">
<link rel="stylesheet" href="css/badges.css">
<link rel="stylesheet" href="css/dashboard.css">
</head>
<body>

<!-- SIDEBAR OVERLAY (mobile) -->
<div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

<!-- MOBILE TOGGLE -->
<button class="mobile-toggle" id="mobileToggle" onclick="toggleSidebar()">โฐ</button>

<div class="dashboard-layout">
  <!-- ===== SIDEBAR ===== -->
  <aside class="sidebar" id="sidebar">
    <a href="index.html" class="sidebar-brand">
      <img src="logo.svg" alt="ุตูุฏุงุช ุงูุนูุฏ">
      <span class="sidebar-brand-text">ุตูุฏุงุช ุงูุนูุฏ</span>
    </a>

    <div class="sidebar-user" id="sidebarUser">
      <div class="sidebar-avatar" id="sidebarAvatar">ู</div>
      <div class="sidebar-user-info">
        <div class="sidebar-user-name" id="sidebarName">ูุงุฌุฏ ุงูุฎุถูุฑ</div>
        <div class="sidebar-user-role">
          <svg viewBox="0 0 24 24"><path d="M12 0C5.37 0 0 5.37 0 12s5.37 12 12 12 12-5.37 12-12S18.63 0 12 0zm-1.25 17.47l-4.82-4.82 1.41-1.41 3.41 3.41 7.2-7.2 1.41 1.42-8.61 8.6z"/></svg>
          ุชุงุฌุฑ ููุซู
        </div>
      </div>
    </div>

    <nav class="sidebar-nav">
      <div class="nav-section-label">ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ</div>

      <button class="nav-item active" data-section="overview" onclick="switchSection('overview')">
        <svg viewBox="0 0 24 24"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg>
        ูุธุฑุฉ ุนุงูุฉ
      </button>

      <button class="nav-item" data-section="products" onclick="switchSection('products')">
        <svg viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4v-4h4v4zm0-6H4v-4h4v4zm0-6H4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4zm6 12h-4v-4h4v4zm0-6h-4v-4h4v4zm0-6h-4V4h4v4z"/></svg>
        ุงูููุชุฌุงุช
      </button>

      <button class="nav-item" data-section="orders" onclick="switchSection('orders')">
        <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
        ุงูุทูุจุงุช
        <span class="badge-count" id="newOrdersCount">2</span>
      </button>

      <button class="nav-item" data-section="finance" onclick="switchSection('finance')">
        <svg viewBox="0 0 24 24"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg>
        ุงููุงููุฉ
      </button>

      <div class="nav-section-label" style="margin-top: 12px">ุงูุฅุนุฏุงุฏุงุช</div>

      <button class="nav-item" data-section="profile" onclick="switchSection('profile')">
        <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
        ุงูููู ุงูุดุฎุตู
      </button>
    </nav>

    <div class="sidebar-footer">
      <button class="nav-item logout-item" onclick="AUTH.logout()">
        <svg viewBox="0 0 24 24"><path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/></svg>
        ุชุณุฌูู ุงูุฎุฑูุฌ
      </button>
    </div>
  </aside>

  <!-- ===== MAIN ===== -->
  <main class="main-content">
    <div class="content-header">
      <h1 id="pageTitle">ูุธุฑุฉ ุนุงูุฉ</h1>
      <div class="header-actions-bar">
        <a href="index.html" class="btn-back">
          <svg viewBox="0 0 24 24"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
          ุงูุนูุฏุฉ ูููููุน
        </a>
      </div>
    </div>

    <div class="content-body">

      <!-- ============================== -->
      <!-- OVERVIEW SECTION               -->
      <!-- ============================== -->
      <div class="section-panel active" id="section-overview">
        <div class="stats-grid" id="statsGrid">
          <!-- Filled by JS -->
        </div>

        <div class="chart-card">
          <div class="chart-title">ุงููุจูุนุงุช ุงูุดูุฑูุฉ</div>
          <div class="bar-chart" id="barChart">
            <!-- Filled by JS -->
          </div>
        </div>

        <div class="table-card">
          <div class="table-header">
            <span class="table-title">ุขุฎุฑ ุงูุทูุจุงุช</span>
            <button class="btn btn-outline btn-sm" onclick="switchSection('orders')">ุนุฑุถ ุงููู</button>
          </div>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>ุฑูู ุงูุทูุจ</th>
                  <th>ุงูููุชุฌ</th>
                  <th>ุงููุดุชุฑู</th>
                  <th>ุงููุจูุบ</th>
                  <th>ุงูุญุงูุฉ</th>
                  <th>ุงูุชุงุฑูุฎ</th>
                </tr>
              </thead>
              <tbody id="recentOrdersBody">
                <!-- Filled by JS -->
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- ============================== -->
      <!-- PRODUCTS SECTION               -->
      <!-- ============================== -->
      <div class="section-panel" id="section-products">
        <div class="table-card">
          <div class="table-header">
            <span class="table-title">ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช</span>
            <button class="btn btn-primary btn-sm" onclick="openAddChooser()">
              <svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
              ุฅุถุงูุฉ ููุชุฌ
            </button>
          </div>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>ุงูููุชุฌ</th>
                  <th>ุงูููุน</th>
                  <th>ุงูุชุตููู</th>
                  <th>ุงูููุดุฃ</th>
                  <th>ุงูุณุนุฑ</th>
                  <th>ุงููุฎุฒูู</th>
                  <th>ุงูุญุงูุฉ</th>
                  <th>ุฅุฌุฑุงุกุงุช</th>
                </tr>
              </thead>
              <tbody id="productsBody">
                <!-- Filled by JS -->
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- ============================== -->
      <!-- ORDERS SECTION                 -->
      <!-- ============================== -->
      <div class="section-panel" id="section-orders">
        <div class="tabs" id="orderTabs">
          <button class="tab-btn active" data-tab="all" onclick="filterOrders('all')">ุงููู <span class="count" id="countAll">0</span></button>
          <button class="tab-btn" data-tab="new" onclick="filterOrders('new')">ุฌุฏูุฏุฉ <span class="count" id="countNew">0</span></button>
          <button class="tab-btn" data-tab="processing" onclick="filterOrders('processing')">ููุฏ ุงููุนุงูุฌุฉ <span class="count" id="countProcessing">0</span></button>
          <button class="tab-btn" data-tab="completed" onclick="filterOrders('completed')">ููุชููุฉ <span class="count" id="countCompleted">0</span></button>
          <button class="tab-btn" data-tab="cancelled" onclick="filterOrders('cancelled')">ููุบูุฉ <span class="count" id="countCancelled">0</span></button>
        </div>

        <div class="table-card">
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>ุฑูู ุงูุทูุจ</th>
                  <th>ุงูููุชุฌ</th>
                  <th>ุงููุดุชุฑู</th>
                  <th>ุงููููุฉ</th>
                  <th>ุงููุจูุบ</th>
                  <th>ุงูุดุญู</th>
                  <th>ุงูุญุงูุฉ</th>
                  <th>ุงูุชุงุฑูุฎ</th>
                  <th>ุฅุฌุฑุงุกุงุช</th>
                </tr>
              </thead>
              <tbody id="ordersBody">
                <!-- Filled by JS -->
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- ============================== -->
      <!-- FINANCE SECTION                -->
      <!-- ============================== -->
      <div class="section-panel" id="section-finance">
        <div class="balance-card">
          <div class="balance-label">ุงูุฑุตูุฏ ุงููุชุงุญ</div>
          <div class="balance-amount" id="balanceAmount">0 <span>ุฑ.ุณ</span></div>
          <div class="balance-actions">
            <button class="btn-withdraw" onclick="openWithdrawModal()">ุทูุจ ุณุญุจ</button>
          </div>
        </div>

        <div class="finance-stats" id="financeStats">
          <!-- Filled by JS -->
        </div>

        <div class="table-card">
          <div class="table-header">
            <span class="table-title">ุณุฌู ุงููุนุงููุงุช</span>
          </div>
          <div class="table-wrapper">
            <table>
              <thead>
                <tr>
                  <th>ุงูุชุงุฑูุฎ</th>
                  <th>ุงูููุน</th>
                  <th>ุงููุตู</th>
                  <th>ุงููุจูุบ</th>
                  <th>ุงููุฑุฌุน</th>
                  <th>ุงูุญุงูุฉ</th>
                </tr>
              </thead>
              <tbody id="transactionsBody">
                <!-- Filled by JS -->
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- ============================== -->
      <!-- PROFILE SECTION                -->
      <!-- ============================== -->
      <div class="section-panel" id="section-profile">
        <div class="profile-section">
          <div class="profile-section-title">
            <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
            ุงููุนูููุงุช ุงูุดุฎุตูุฉ
          </div>
          <div class="profile-avatar-row">
            <div class="profile-avatar-lg" id="profileAvatar">ู</div>
            <div class="profile-avatar-info">
              <h3 id="profileFullName">ูุงุฌุฏ ุงูุฎุถูุฑ</h3>
              <p>ุนุถู ููุฐ ููุงูุฑ 2026</p>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">ุงูุงุณู ุงูุฃูู</label>
              <input type="text" class="form-input" id="profFirstName" value="">
            </div>
            <div class="form-group">
              <label class="form-label">ุงูุงุณู ุงูุฃุฎูุฑ</label>
              <input type="text" class="form-input" id="profLastName" value="">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
              <input type="email" class="form-input" id="profEmail" value="">
            </div>
            <div class="form-group">
              <label class="form-label">ุฑูู ุงูุฌูุงู</label>
              <input type="tel" class="form-input" id="profPhone" value="">
            </div>
          </div>
        </div>

        <div class="profile-section">
          <div class="profile-section-title">
            <svg viewBox="0 0 24 24"><path d="M20 4H4v2h16V4zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6h1zm-9 4H6v-4h6v4z"/></svg>
            ูุนูููุงุช ุงููุชุฌุฑ
          </div>
          <div class="form-group">
            <label class="form-label">ุงุณู ุงููุชุฌุฑ</label>
            <input type="text" class="form-input" id="profStoreName" value="">
          </div>
          <div class="form-group">
            <label class="form-label">ูุตู ุงููุชุฌุฑ</label>
            <textarea class="form-textarea" id="profStoreDesc"></textarea>
          </div>
        </div>

        <!-- ===== ูุณู ุงูุชูุซูู ===== -->
        <div class="profile-section">
          <div class="profile-section-title">
            <svg viewBox="0 0 24 24"><path d="M12 0C5.37 0 0 5.37 0 12s5.37 12 12 12 12-5.37 12-12S18.63 0 12 0zm-1.25 17.47l-4.82-4.82 1.41-1.41 3.41 3.41 7.2-7.2 1.41 1.42-8.61 8.6z"/></svg>
            ุงูุชูุซูู
          </div>

          <!-- ุญุงูุฉ ุชูุซูู ุงูุชุงุฌุฑ -->
          <div class="verify-status-card" id="merchantVerifyCard">
            <div class="verify-status-header">
              <span class="verify-icon merchant">๐ช</span>
              <div>
                <strong>ุชุงุฌุฑ ููุซู</strong>
                <p class="verify-desc">ูุซูู ุญุณุงุจู ูุชุงุฌุฑ ุนู ุทุฑูู ุฑูุน ุงูุณุฌู ุงูุชุฌุงุฑู</p>
              </div>
              <span class="verify-badge" id="merchantBadge">ุบูุฑ ููุซู</span>
            </div>
            <div id="merchantVerifyForm" class="verify-form">
              <div class="form-group" style="margin-bottom: 12px;">
                <label class="form-label">ุฑูู ุงูุณุฌู ุงูุชุฌุงุฑู</label>
                <input type="text" class="form-input" id="profCommercialRegister" placeholder="ุฃุฏุฎู ุฑูู ุงูุณุฌู ุงูุชุฌุงุฑู" style="direction: ltr; text-align: right;">
              </div>
              <button class="btn btn-outline btn-sm" onclick="submitMerchantVerification()">ุฅุฑุณุงู ุทูุจ ุชูุซูู</button>
            </div>
          </div>

          <!-- ุญุงูุฉ ุชูุซูู ุงูุจุงุฆุน -->
          <div class="verify-status-card" id="sellerVerifyCard" style="margin-top: 16px;">
            <div class="verify-status-header">
              <span class="verify-icon seller">โญ</span>
              <div>
                <strong>ุจุงุฆุน ููุซู</strong>
                <p class="verify-desc">ููููุญ ุชููุงุฆูุงู ุจุนุฏ ุฅุชูุงู ุจูุน ูุฒุงุฏูู ุจูุฌุงุญ</p>
              </div>
              <span class="verify-badge" id="sellerBadge">ุบูุฑ ููุซู</span>
            </div>
            <div class="verify-progress">
              <div class="verify-progress-bar">
                <div class="verify-progress-fill" id="auctionProgressFill" style="width: 0%"></div>
              </div>
              <span class="verify-progress-text" id="auctionProgressText">0 / 2 ูุฒุงุฏ ููุชูู</span>
            </div>
          </div>
        </div>

        <div class="profile-section">
          <div class="profile-section-title">
            <svg viewBox="0 0 24 24"><path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"/></svg>
            ุงููุนูููุงุช ุงูุจูููุฉ
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">ุงูุจูู</label>
              <select class="form-select" id="profBankName">
                <option value="">ุงุฎุชุฑ ุงูุจูู</option>
                <option value="ุจูู ุงูุฑุงุฌุญู">ุจูู ุงูุฑุงุฌุญู</option>
                <option value="ุงูุจูู ุงูุฃููู">ุงูุจูู ุงูุฃููู</option>
                <option value="ุจูู ุงูุฑูุงุถ">ุจูู ุงูุฑูุงุถ</option>
                <option value="ุจูู ุงูุฅููุงุก">ุจูู ุงูุฅููุงุก</option>
                <option value="ุงูุจูู ุงูุณุนูุฏู ุงููุฑูุณู">ุงูุจูู ุงูุณุนูุฏู ุงููุฑูุณู</option>
                <option value="ุจูู ุงูุจูุงุฏ">ุจูู ุงูุจูุงุฏ</option>
                <option value="ุจูู ุงูุฌุฒูุฑุฉ">ุจูู ุงูุฌุฒูุฑุฉ</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">ุงุณู ุงููุณุชููุฏ</label>
              <input type="text" class="form-input" id="profBankHolder" value="">
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">ุฑูู ุงูุขูุจุงู (IBAN)</label>
            <input type="text" class="form-input" id="profIban" value="" placeholder="SA0000000000000000000000" style="direction: ltr; text-align: left;">
          </div>
        </div>

        <div class="profile-section">
          <div class="profile-section-title">
            <svg viewBox="0 0 24 24"><path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/></svg>
            ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
          </div>
          <div class="form-group">
            <label class="form-label">ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ</label>
            <input type="password" class="form-input" id="profCurrentPass">
          </div>
          <div class="form-row">
            <div class="form-group">
              <label class="form-label">ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ</label>
              <input type="password" class="form-input" id="profNewPass">
            </div>
            <div class="form-group">
              <label class="form-label">ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ</label>
              <input type="password" class="form-input" id="profConfirmPass">
            </div>
          </div>
        </div>

        <div style="display: flex; gap: 12px; justify-content: flex-start;">
          <button class="btn btn-primary" onclick="saveProfile()">ุญูุธ ุงูุชุบููุฑุงุช</button>
          <button class="btn btn-outline" onclick="loadProfile()">ุฅูุบุงุก</button>
        </div>
      </div>

    </div><!-- content-body -->
  </main>
</div><!-- dashboard-layout -->

<!-- ===== ADD CHOOSER MODAL ===== -->
<div class="modal-overlay" id="addChooserModal">
  <div class="modal" style="max-width: 480px;">
    <div class="modal-header">
      <h2>ุฅุถุงูุฉ ููุชุฌ</h2>
      <button class="modal-close" onclick="closeAddChooser()">โ</button>
    </div>
    <div class="modal-body">
      <p style="font-size: 0.88rem; margin-bottom: 20px; opacity: 0.7;">ุงุฎุชุฑ ุทุฑููุฉ ุทุฑุญ ุงูููุชุฌ:</p>
      <div class="listing-chooser">
        <div class="chooser-card" onclick="chooseListingType('market')">
          <div class="chooser-icon market-icon">
            <svg viewBox="0 0 24 24"><path d="M20 4H4v2h16V4zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6h1zm-9 4H6v-4h6v4z"/></svg>
          </div>
          <div class="chooser-title">ุทุฑุญ ูู ุงูุณูู</div>
          <div class="chooser-desc">ุจูุน ูุจุงุดุฑ ุจุณุนุฑ ุซุงุจุช</div>
        </div>
        <div class="chooser-card" onclick="chooseListingType('auction')">
          <div class="chooser-icon auction-icon">
            <svg viewBox="0 0 24 24"><path d="M17.65 6.35a7.95 7.95 0 0 0-11.3 0L12 12l5.65-5.65zM12 22c5.52 0 10-4.48 10-10h-4c0 3.31-2.69 6-6 6s-6-2.69-6-6H2c0 5.52 4.48 10 10 10z"/></svg>
          </div>
          <div class="chooser-title">ูุฒุงุฏ</div>
          <div class="chooser-desc">ูุฒุงุฏ ุจูู ุงููุดุชุฑูู ุนูู ุงูููุชุฌ</div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ===== PRODUCT MODAL ===== -->
<div class="modal-overlay" id="productModal">
  <div class="modal">
    <div class="modal-header">
      <h2 id="productModalTitle">ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ</h2>
      <button class="modal-close" onclick="closeProductModal()">โ</button>
    </div>
    <div class="modal-body">
      <input type="hidden" id="editProductId" value="">
      <input type="hidden" id="pmListingType" value="market">

      <!-- AUCTION FIELDS (shown only for auction) -->
      <div class="auction-fields" id="auctionFields">
        <div class="auction-fields-title">
          <svg viewBox="0 0 24 24"><path d="M17.65 6.35a7.95 7.95 0 0 0-11.3 0L12 12l5.65-5.65zM12 22c5.52 0 10-4.48 10-10h-4c0 3.31-2.69 6-6 6s-6-2.69-6-6H2c0 5.52 4.48 10 10 10z"/></svg>
          ุฅุนุฏุงุฏุงุช ุงููุฒุงุฏ
        </div>

        <div class="auction-type-toggle">
          <button type="button" class="auction-type-btn selected" data-atype="timed" onclick="selectAuctionType('timed')">
            ูุญุฏุฏ ุจููุช
            <small>ููุชูู ุจุนุฏ ูุฏุฉ ูุนููุฉ</small>
          </button>
          <button type="button" class="auction-type-btn" data-atype="until_sold" onclick="selectAuctionType('until_sold')">
            ููุชูู ุจุงูุจูุน
            <small>ูุณุชูุฑ ุญุชู ููุจู ุงูุชุงุฌุฑ ุนุฑุถุงู</small>
          </button>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label">ุงูุณุนุฑ ุงูุงูุชุชุงุญู (ุฑ.ุณ)</label>
            <input type="number" class="form-input" id="pmStartPrice" placeholder="100" min="1">
          </div>
          <div class="form-group">
            <label class="form-label">ุงูุญุฏ ุงูุฃุฏูู ูููุฒุงูุฏุฉ (ุฑ.ุณ)</label>
            <input type="number" class="form-input" id="pmMinBid" placeholder="10" min="1">
          </div>
        </div>

        <div class="form-group" id="auctionDurationGroup">
          <label class="form-label">ูุฏุฉ ุงููุฒุงุฏ</label>
          <select class="form-select" id="pmAuctionDuration">
            <option value="1">ููู ูุงุญุฏ</option>
            <option value="3" selected>3 ุฃูุงู</option>
            <option value="5">5 ุฃูุงู</option>
            <option value="7">7 ุฃูุงู</option>
            <option value="14">14 ููู</option>
            <option value="30">30 ููู</option>
          </select>
        </div>

        <div class="form-group">
          <label class="form-label">ุณุนุฑ ุงูุดุฑุงุก ุงูููุฑู (ุงุฎุชูุงุฑู)</label>
          <input type="number" class="form-input" id="pmBuyNow" placeholder="ุงูุณุนุฑ ุงูุฐู ููููู ุงููุฒุงุฏ ููุฑุงู" min="0">
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label class="form-label">ุงุณู ุงูููุชุฌ</label>
          <input type="text" class="form-input" id="pmName" placeholder="ูุซุงู: ุนูุฏ ููุจูุฏู ูุงุฎุฑ">
        </div>
        <div class="form-group">
          <label class="form-label">ุงูุชุตููู</label>
          <select class="form-select" id="pmCategory">
            <option value="ุจุฎูุฑ">ุจุฎูุฑ</option>
            <option value="ุฏูู ุนูุฏ">ุฏูู ุนูุฏ</option>
          </select>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">ุงูููุน</label>
          <select class="form-select" id="pmType">
            <option value="ุทุจูุนู">ุทุจูุนู</option>
            <option value="ูุญุณู">ูุญุณู</option>
            <option value="ุจููุฑ">ุจููุฑ</option>
            <option value="ูุฎูุท">ูุฎูุท</option>
          </select>
        </div>
        <div class="form-group">
          <label class="form-label">ุงูููุดุฃ</label>
          <select class="form-select" id="pmOrigin">
            <option value="ููุจูุฏู">ููุจูุฏู</option>
            <option value="ููุฏู">ููุฏู</option>
            <option value="ูุงูุณู">ูุงูุณู</option>
            <option value="ููุชูุงูู">ููุชูุงูู</option>
            <option value="ูุงููุฒู">ูุงููุฒู</option>
            <option value="ุฅูุฏูููุณู">ุฅูุฏูููุณู</option>
            <option value="ุจูุฑูู">ุจูุฑูู</option>
            <option value="ุชุงูููุฏู">ุชุงูููุฏู</option>
            <option value="ุณุฑููุงููู">ุณุฑููุงููู</option>
            <option value="ุจุงุจูุงุฒู">ุจุงุจูุงุฒู</option>
          </select>
        </div>
      </div>
      <div class="form-row">
        <div class="form-group">
          <label class="form-label">ุงููุฒู</label>
          <input type="number" class="form-input" id="pmWeight" placeholder="50" step="0.25" min="0">
        </div>
        <div class="form-group">
          <label class="form-label">ุงููุญุฏุฉ</label>
          <select class="form-select" id="pmUnit">
            <option value="ุฌุฑุงู">ุฌุฑุงู</option>
            <option value="ุชููุฉ">ุชููุฉ</option>
            <option value="ุฃูููุฉ">ุฃูููุฉ</option>
            <option value="ูููู">ูููู</option>
          </select>
        </div>
      </div>
      <div class="form-row" id="priceStockRow">
        <div class="form-group" id="priceGroup">
          <label class="form-label" id="priceLabelText">ุงูุณุนุฑ (ุฑ.ุณ)</label>
          <input type="number" class="form-input" id="pmPrice" placeholder="285" min="0">
        </div>
        <div class="form-group">
          <label class="form-label">ุงููุฎุฒูู</label>
          <input type="number" class="form-input" id="pmStock" placeholder="10" min="0">
        </div>
      </div>
      <div class="form-group">
        <label class="form-label">ุฑุงุจุท ุงูุตูุฑุฉ</label>
        <input type="url" class="form-input" id="pmImage" placeholder="https://..." style="direction: ltr; text-align: left;">
      </div>
      <div class="form-group">
        <label class="form-label">ุงููุตู</label>
        <textarea class="form-textarea" id="pmDesc" placeholder="ูุตู ููุตู ููููุชุฌ..."></textarea>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary" id="saveProductBtn" onclick="saveProduct()">ุญูุธ ุงูููุชุฌ</button>
      <button class="btn btn-outline" onclick="closeProductModal()">ุฅูุบุงุก</button>
    </div>
  </div>
</div>

<!-- ===== WITHDRAW MODAL ===== -->
<div class="modal-overlay" id="withdrawModal">
  <div class="modal" style="max-width: 480px;">
    <div class="modal-header">
      <h2>ุทูุจ ุณุญุจ</h2>
      <button class="modal-close" onclick="closeWithdrawModal()">โ</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label class="form-label">ุงููุจูุบ (ุฑ.ุณ)</label>
        <input type="number" class="form-input" id="withdrawAmount" placeholder="0" min="100">
      </div>
      <div class="form-group">
        <label class="form-label">ุงูุจูู</label>
        <input type="text" class="form-input" id="withdrawBank" readonly>
      </div>
      <div class="form-group">
        <label class="form-label">ุฑูู ุงูุขูุจุงู</label>
        <input type="text" class="form-input" id="withdrawIban" readonly style="direction: ltr; text-align: left;">
      </div>
      <p style="font-size: 0.8rem; opacity: 0.6; margin-top: 8px;">* ูุชู ุชุญููู ุงููุจูุบ ุฎูุงู 1-3 ุฃูุงู ุนูู</p>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary" onclick="submitWithdraw()">ุชุฃููุฏ ุงูุณุญุจ</button>
      <button class="btn btn-outline" onclick="closeWithdrawModal()">ุฅูุบุงุก</button>
    </div>
  </div>
</div>

<!-- ===== ORDER DETAIL MODAL (Enhanced) ===== -->
<div class="modal-overlay" id="orderDetailModal">
  <div class="modal" style="max-width: 680px;">
    <div class="modal-header">
      <h2 id="orderDetailTitle">ุชูุงุตูู ุงูุทูุจ</h2>
      <button class="modal-close" onclick="closeOrderDetail()">&#10005;</button>
    </div>
    <div class="modal-body" id="orderDetailBody">
      <!-- Filled by JS: order info, address, shipping, timeline -->
    </div>
    <div class="modal-footer" id="orderDetailFooter">
      <!-- Filled by JS: contextual action buttons -->
    </div>
  </div>
</div>

<!-- ===== WAYBILL MODAL ===== -->
<div class="modal-overlay" id="waybillModal">
  <div class="modal" style="max-width: 700px;">
    <div class="modal-header">
      <h2>ุจูููุตุฉ ุงูุดุญู</h2>
      <button class="modal-close" onclick="closeWaybillModal()">&#10005;</button>
    </div>
    <div class="modal-body">
      <input type="hidden" id="waybillOrderId" value="">
      <div class="form-group">
        <label class="form-label">ุดุฑูุฉ ุงูุดุญู</label>
        <select class="form-select" id="waybillCarrier" onchange="onWaybillCarrierChange()">
          <option value="">ุงุฎุชุฑ ุดุฑูุฉ ุงูุดุญู</option>
          <option value="aramex">Aramex - ุฃุฑุงููุณ</option>
          <option value="smsa">SMSA Express</option>
          <option value="spl">ุงูุจุฑูุฏ ุงูุณุนูุฏู - SPL</option>
          <option value="other">ุดุฑูุฉ ุฃุฎุฑู</option>
        </select>
      </div>
      <div class="form-group" id="customCarrierGroup" style="display:none;">
        <label class="form-label">ุงุณู ุดุฑูุฉ ุงูุดุญู</label>
        <input type="text" class="form-input" id="waybillCustomCarrier" placeholder="ุฃุฏุฎู ุงุณู ุดุฑูุฉ ุงูุดุญู">
      </div>
      <div class="form-group">
        <label class="form-label">ุฑูู ุงูุชุชุจุน</label>
        <input type="text" class="form-input" id="waybillTracking" placeholder="ุฃุฏุฎู ุฑูู ุงูุชุชุจุน" style="direction: ltr; text-align: left;">
      </div>
      <!-- Waybill Preview (printable area) -->
      <div class="waybill-preview" id="waybillPreview"></div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-primary" onclick="saveAndPrintWaybill()">ุญูุธ ูุทุจุงุนุฉ ุงูุจูููุตุฉ</button>
      <button class="btn btn-outline" onclick="closeWaybillModal()">ุฅูุบุงุก</button>
    </div>
  </div>
</div>

<!-- ===== REJECT REASON MODAL ===== -->
<div class="modal-overlay" id="rejectModal">
  <div class="modal" style="max-width: 440px;">
    <div class="modal-header">
      <h2>ุณุจุจ ุงูุฑูุถ</h2>
      <button class="modal-close" onclick="closeRejectModal()">&#10005;</button>
    </div>
    <div class="modal-body">
      <input type="hidden" id="rejectOrderId" value="">
      <div class="form-group">
        <label class="form-label">ุณุจุจ ุฑูุถ ุงูุทูุจ</label>
        <select class="form-select" id="rejectReason" onchange="onRejectReasonChange()">
          <option value="ุงูููุชุฌ ุบูุฑ ูุชููุฑ">ุงูููุชุฌ ุบูุฑ ูุชููุฑ</option>
          <option value="ุฎุทุฃ ูู ุงูุณุนุฑ">ุฎุทุฃ ูู ุงูุณุนุฑ</option>
          <option value="ุนููุงู ุบูุฑ ุตุญูุญ">ุนููุงู ุบูุฑ ุตุญูุญ</option>
          <option value="other">ุณุจุจ ุขุฎุฑ</option>
        </select>
      </div>
      <div class="form-group" id="customRejectGroup" style="display:none;">
        <label class="form-label">ุงุฐูุฑ ุงูุณุจุจ</label>
        <textarea class="form-textarea" id="rejectCustomReason" rows="2"></textarea>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-danger" onclick="confirmRejectOrder()">ุชุฃููุฏ ุงูุฑูุถ</button>
      <button class="btn btn-outline" onclick="closeRejectModal()">ุฅูุบุงุก</button>
    </div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.21.0/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/nsfwjs@2.4.2/dist/nsfwjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="js/supabase.js?v=2"></script>
<script src="js/config.js?v=2"></script>
<script src="js/utils.js?v=2"></script>
<script src="js/auth.js?v=6"></script>
<script src="js/profiles.js?v=2"></script>
<script src="js/products.js?v=2"></script>
<script src="js/orders.js?v=2"></script>
<script src="js/transactions.js?v=2"></script>
<script src="js/header.js?v=2"></script>
<script src="js/ui.js?v=2"></script>
<script src="js/image-guard.js?v=2"></script>
<script src="js/dashboard-app.js?v=3"></script>
</body>
</html>
